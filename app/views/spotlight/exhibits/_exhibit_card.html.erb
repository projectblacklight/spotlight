<div class="col mb-4">
  <div class="card exhibit-card">
    <%= link_to exhibit, aria: { hidden: true  }, tabindex: '-1' do %>
      <% if exhibit.thumbnail.present? && exhibit.thumbnail.iiif_url %>
        <%= image_tag(exhibit.thumbnail.iiif_url, class: 'card-img',  alt: '', role: 'presentation') %>
      <% else %>
        <%= image_tag 'spotlight/default_thumbnail.jpg', class: 'card-img default-thumbnail',  alt: '', role: 'presentation' %>
      <% end %>
    <% end %>
    <div class="card-img-overlay pb-0">
      <% unless exhibit.published? %>
        <div class="badge badge-warning unpublished"><%= t('.unpublished') %></div>
      <% end %>

      <%= content_tag :h2, class: 'card-title h5 text-center', aria: { describedby: "exhibit-description-#{exhibit.to_param}" } do %>
        <%= link_to exhibit.title, exhibit, class: 'stretched-link' %>
      <% end %>

      <%= content_tag :div, id: "exhibit-description-#{exhibit.to_param}", class: 'card-text exhibit-description' do %>
        <p class="subtitle">
          <%= exhibit.subtitle %>
        </p>

        <% if exhibit.description %>
          <p class="description">
            <%= truncated_description = exhibit.description.truncate(168, omission: '', separator: ' ') %>
            <% if exhibit.description.length > 168 %>
              <%= content_tag(:span,"&hellip;".html_safe, class: "d-none d-sm-inline d-xl-none") %>
              <span class="d-inline d-sm-none d-xl-inline">
                <%= exhibit.description.slice(truncated_description.length, exhibit.description.length) %>
              </span>
            <% end %>
          </p>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
