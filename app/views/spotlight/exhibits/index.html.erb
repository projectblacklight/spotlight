<% public_content = capture do %>
  <% if @exhibits.published.none? %>
    <%= render 'missing_exhibits' %>
  <% else %>
    <%= render 'public_exhibits' %>
  <% end %>
<% end %>

<% if (current_user && current_user.exhibits.any?) || can?(:manage, Spotlight::Exhibit) %>
  <%= render Spotlight::TabPanelComponent.new(tab_position: :outside) do |component| %>
    <% component.tab(id: 'published', label: t('.published'), active: true) do %>
      <%= public_content %>
    <% end %>

    <% if can?(:manage, Spotlight::Exhibit) && @exhibits.unpublished.accessible_by(current_ability).any? %>
      <% component.tab(id: 'unpublished', label: t('.unpublished')) do %>
        <%= render 'exhibits', exhibits: @exhibits.unpublished.ordered_by_weight.accessible_by(current_ability) %>
      <% end %>
    <% end %>

    <% if current_user && current_user.exhibits.any? %>
      <% component.tab(id: 'user', label: t('.user')) do %>
        <%= render 'exhibits', exhibits: current_user.exhibits %>
      <% end %>
    <% end %>
  <% end %>
<% else %>
  <%= public_content %>
<% end %>

<% content_for(:sidebar_position) { 'order-last' } %>
<% content_for(:sidebar) do %>
  <%= render "shared/site_sidebar" %>
<% end %>
