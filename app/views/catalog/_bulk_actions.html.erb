<div class="dropdown bulk-actions-dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" id="bulk-actions-button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <%= t(:'spotlight.bulk_actions.label') %>
  </button>
  <div class="dropdown-menu" aria-labelledby="bulk-actions-button">
    <%= link_to t(:'spotlight.bulk_actions.change_visibility.heading'), '#', class: 'dropdown-item', data: {toggle:"modal", target:"#change-visibility-modal"} %>
    <%= link_to t(:'spotlight.bulk_actions.add_tags.heading'), '#', class: 'dropdown-item', data: {toggle:"modal", target:"#add-tags-modal"} %>
  </div>
</div>
<div class="modal fade" id="change-visibility-modal" tabindex="-1" role="dialog" aria-labelledby="save-modal-label" aria-hidden="true">
  <div class="modal-dialog">
  <%= bootstrap_form_for([:change_visibility, current_exhibit], url: change_visibility_exhibit_bulk_actions_path(current_exhibit), method: 'post') do |f| %>
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="save-modal-label"><%= t(:'spotlight.bulk_actions.change_visibility.heading') %></h4>
        <button type="button" class="blacklight-modal-close close" data-dismiss="modal" aria-label="<%= t('blacklight.modal.close') %>">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>
          <%= t(:'spotlight.bulk_actions.change_visibility.description', count: @response.total) %>
        </p>
        <div class="form-check-label">
          <%= t(:'spotlight.bulk_actions.change_visibility.label') %>
        </div>
        <% ['public', 'private'].each do |key| %>
          <div class="form-check">
            <%= label_tag "visibility_#{key}", class: 'form-check-label'  do %>
              <%= radio_button_tag :visibility, key, {}, class: 'form-check-input' %>
              <%= t(:"spotlight.bulk_actions.change_visibility.#{key}") %>
            <% end %>
          </div>
        <% end %>
        <%= render_hash_as_hidden_fields(search_state.params_for_search) %>
      </div>
      <div class="modal-footer d-flex flex-row-reverse justify-content-start">
        <%= f.submit t(:'spotlight.bulk_actions.change'), class: 'btn btn-primary', data: { confirm: t(:'spotlight.bulk_actions.confirm') } %>
        <button type="button" class="btn btn-link" data-dismiss="modal"><%= t :cancel %></button>
      </div>
    </div>
    <% end %>
  </div>
</div>
<div class="modal fade" id="add-tags-modal" tabindex="-1" role="dialog" aria-labelledby="add-tag-modal" aria-hidden="true">
  <div class="modal-dialog">
  <%= bootstrap_form_for([:visibility, current_exhibit], url: add_tags_exhibit_bulk_actions_path(current_exhibit), method: 'post') do |f| %>
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="add-tag-modal"><%= t(:'spotlight.bulk_actions.add_tags.heading') %></h4>
        <button type="button" class="blacklight-modal-close close" data-dismiss="modal" aria-label="<%= t('blacklight.modal.close') %>">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>
          <%= t(:'spotlight.bulk_actions.add_tags.description', count: @response.total) %>
        </p>
        <div class="form-group">
          <%= label_tag :tags, t(:'spotlight.bulk_actions.add_tags.label') %>
          <%= text_field_tag :tags, {}, class: 'form-control', data: { autocomplete_tag: true, autocomplete_url: exhibit_tags_path(current_exhibit, format: 'json')} %>
        </div>
        <%= render_hash_as_hidden_fields(search_state.params_for_search) %>
      </div>
      <div class="modal-footer d-flex flex-row-reverse justify-content-start">
        <%= f.submit t(:'spotlight.bulk_actions.add'), class: 'btn btn-primary', data: { confirm: t(:'spotlight.bulk_actions.confirm') } %>
        <button type="button" class="btn btn-link" data-dismiss="modal"><%= t :cancel %></button>
      </div>
    </div>
    <% end %>
  </div>
</div>
